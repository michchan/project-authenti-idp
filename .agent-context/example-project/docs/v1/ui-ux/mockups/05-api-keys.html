<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Keys - AuthentiIDP</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Colors - Following AuthentiIDP Design System */
            --color-primary: #2563EB;
            --color-primary-hover: #1D4ED8;
            --color-secondary: #059669;
            --color-accent: #7C3AED;
            --color-error: #DC2626;
            --color-warning: #D97706;
            --color-success: #059669;
            
            --color-bg: #FFFFFF;
            --color-surface: #F8FAFC;
            --color-border: #E2E8F0;
            --color-text-primary: #0F172A;
            --color-text-muted: #64748B;
            
            /* Spacing System */
            --spacing-1: 4px;
            --spacing-2: 8px;
            --spacing-3: 12px;
            --spacing-4: 16px;
            --spacing-5: 24px;
            --spacing-6: 32px;
            --spacing-8: 64px;
            
            /* Border Radius */
            --radius-sm: 4px;
            --radius-md: 6px;
            --radius-lg: 8px;
            --radius-full: 9999px;
            
            /* Shadows */
            --shadow-sm: 0 1px 3px rgba(0,0,0,0.12);
            --shadow-md: 0 4px 6px rgba(0,0,0,0.10);
            --shadow-lg: 0 10px 15px rgba(0,0,0,0.10);
            
            /* Typography */
            --font-base: 'Inter', sans-serif;
            --font-mono: 'JetBrains Mono', monospace;
        }
        
        /* Dark mode styles */
        @media (prefers-color-scheme: dark) {
            .dark-mode {
                --color-bg: #0F172A;
                --color-surface: #1E293B;
                --color-border: #334155;
                --color-text-primary: #F8FAFC;
                --color-text-muted: #94A3B8;
            }
        }
        
        * {
            box-sizing: border-box;
        }
        
        body {
            margin: 0;
            font-family: var(--font-base);
            background: var(--color-surface);
            color: var(--color-text-primary);
            line-height: 1.5;
        }
        
        /* Header */
        .header {
            background: var(--color-bg);
            border-bottom: 1px solid var(--color-border);
            padding: 0 var(--spacing-5);
            height: 64px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-left {
            display: flex;
            align-items: center;
            gap: var(--spacing-5);
        }
        
        .logo {
            font-size: 20px;
            font-weight: 700;
            color: var(--color-primary);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: var(--spacing-2);
        }
        
        .nav-links {
            display: flex;
            align-items: center;
            gap: var(--spacing-4);
            list-style: none;
            margin: 0;
            padding: 0;
        }
        
        .nav-link {
            color: var(--color-text-muted);
            text-decoration: none;
            font-weight: 500;
            padding: var(--spacing-2) var(--spacing-3);
            border-radius: var(--radius-md);
            transition: all 0.2s ease;
        }
        
        .nav-link:hover,
        .nav-link.active {
            color: var(--color-primary);
            background: rgba(37, 99, 235, 0.1);
        }
        
        .header-right {
            display: flex;
            align-items: center;
            gap: var(--spacing-3);
        }
        
        .user-menu {
            position: relative;
        }
        
        .user-button {
            display: flex;
            align-items: center;
            gap: var(--spacing-2);
            background: transparent;
            border: none;
            cursor: pointer;
            padding: var(--spacing-2);
            border-radius: var(--radius-md);
            transition: all 0.2s ease;
        }
        
        .user-button:hover {
            background: var(--color-surface);
        }
        
        .avatar {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, #667EEA 0%, #764BA2 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 14px;
        }
        
        /* Main layout */
        .main-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: var(--spacing-6) var(--spacing-5);
        }
        
        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: var(--spacing-6);
        }
        
        .page-title-section {
            flex: 1;
        }
        
        .page-title {
            font-size: 36px;
            font-weight: 700;
            color: var(--color-text-primary);
            margin: 0 0 var(--spacing-2) 0;
            display: flex;
            align-items: center;
            gap: var(--spacing-3);
        }
        
        .page-subtitle {
            color: var(--color-text-muted);
            font-size: 16px;
            margin: 0;
        }
        
        .page-actions {
            display: flex;
            gap: var(--spacing-3);
            align-items: center;
        }
        
        /* Buttons */
        .btn-primary {
            background: var(--color-primary);
            color: white;
            border: none;
            border-radius: var(--radius-md);
            padding: var(--spacing-3) var(--spacing-4);
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: var(--spacing-2);
        }
        
        .btn-primary:hover {
            background: var(--color-primary-hover);
            transform: translateY(-1px);
            box-shadow: var(--shadow-sm);
        }
        
        .btn-secondary {
            background: var(--color-bg);
            color: var(--color-text-primary);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-md);
            padding: var(--spacing-3) var(--spacing-4);
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .btn-secondary:hover {
            border-color: var(--color-primary);
            color: var(--color-primary);
        }
        
        .btn-danger {
            background: var(--color-error);
            color: white;
            border: none;
            border-radius: var(--radius-md);
            padding: var(--spacing-2) var(--spacing-3);
            font-size: 12px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .btn-danger:hover {
            background: #B91C1C;
        }
        
        /* API Keys List */
        .api-keys-container {
            background: var(--color-bg);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-sm);
        }
        
        .api-key-item {
            padding: var(--spacing-5);
            border-bottom: 1px solid var(--color-border);
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: var(--spacing-5);
        }
        
        .api-key-item:last-child {
            border-bottom: none;
        }
        
        .api-key-info {
            flex: 1;
        }
        
        .api-key-header {
            display: flex;
            align-items: center;
            gap: var(--spacing-3);
            margin-bottom: var(--spacing-2);
        }
        
        .api-key-name {
            font-weight: 600;
            color: var(--color-text-primary);
            font-size: 18px;
            margin: 0;
        }
        
        .status-badge {
            padding: var(--spacing-1) var(--spacing-3);
            border-radius: var(--radius-full);
            font-size: 12px;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .status-active {
            background: #D1FAE5;
            color: #065F46;
        }
        
        .status-expired {
            background: #FEE2E2;
            color: #991B1B;
        }
        
        .status-revoked {
            background: #F3F4F6;
            color: #6B7280;
        }
        
        .api-key-details {
            color: var(--color-text-muted);
            font-size: 14px;
            line-height: 1.6;
        }
        
        .api-key-code {
            background: var(--color-surface);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-md);
            padding: var(--spacing-3);
            font-family: var(--font-mono);
            font-size: 13px;
            color: var(--color-text-primary);
            margin: var(--spacing-3) 0;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .copy-button {
            background: none;
            border: none;
            color: var(--color-primary);
            cursor: pointer;
            font-size: 14px;
            padding: var(--spacing-1);
            border-radius: var(--radius-sm);
            transition: all 0.2s ease;
        }
        
        .copy-button:hover {
            background: rgba(37, 99, 235, 0.1);
        }
        
        .api-key-meta {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: var(--spacing-4);
            margin-top: var(--spacing-3);
        }
        
        .meta-item {
            display: flex;
            flex-direction: column;
        }
        
        .meta-label {
            font-size: 12px;
            font-weight: 500;
            color: var(--color-text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .meta-value {
            font-size: 14px;
            color: var(--color-text-primary);
            margin-top: var(--spacing-1);
        }
        
        .api-key-actions {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-2);
            align-items: flex-end;
        }
        
        .permissions-list {
            background: var(--color-surface);
            border-radius: var(--radius-md);
            padding: var(--spacing-3);
            margin: var(--spacing-3) 0;
        }
        
        .permission-item {
            display: flex;
            align-items: center;
            gap: var(--spacing-2);
            font-size: 14px;
            margin-bottom: var(--spacing-1);
        }
        
        .permission-item:last-child {
            margin-bottom: 0;
        }
        
        .permission-granted {
            color: var(--color-success);
        }
        
        .permission-denied {
            color: var(--color-text-muted);
        }
        
        /* Theme toggle */
        .theme-toggle {
            background: transparent;
            border: 1px solid var(--color-border);
            border-radius: var(--radius-full);
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 16px;
        }
        
        .theme-toggle:hover {
            border-color: var(--color-primary);
            color: var(--color-primary);
        }
        
        /* Empty state */
        .empty-state {
            text-align: center;
            padding: var(--spacing-8);
            color: var(--color-text-muted);
        }
        
        .empty-state-icon {
            font-size: 48px;
            margin-bottom: var(--spacing-4);
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }
            
            .page-header {
                flex-direction: column;
                align-items: stretch;
                gap: var(--spacing-4);
            }
            
            .api-key-item {
                flex-direction: column;
                gap: var(--spacing-3);
            }
            
            .api-key-actions {
                flex-direction: row;
                align-items: center;
            }
            
            .api-key-meta {
                grid-template-columns: 1fr 1fr;
            }
            
            .header {
                padding: 0 var(--spacing-4);
            }
            
            .main-container {
                padding: var(--spacing-4);
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-left">
            <a href="02-dashboard.html" class="logo">
                🔐 AuthentiIDP
            </a>
            <nav>
                <ul class="nav-links">
                    <li><a href="02-dashboard.html" class="nav-link">🏠 Dashboard</a></li>
                    <li><a href="03-users.html" class="nav-link">👥 Users</a></li>
                    <li><a href="04-security.html" class="nav-link">🛡️ Security</a></li>
                    <li><a href="#" class="nav-link active">🔑 API Keys</a></li>
                    <li><a href="06-analytics.html" class="nav-link">📊 Analytics</a></li>
                </ul>
            </nav>
        </div>
        
        <div class="header-right">
            <button class="theme-toggle" onclick="toggleTheme()" title="Toggle dark mode">
                🌙
            </button>
            
            <div class="user-menu">
                <button class="user-button" onclick="toggleUserMenu()">
                    <div class="avatar">JD</div>
                    <span>John Doe</span>
                    <span style="font-size: 12px;">▼</span>
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-container">
        <!-- Page Header -->
        <div class="page-header">
            <div class="page-title-section">
                <h1 class="page-title">
                    🔑 API Key Management
                </h1>
                <p class="page-subtitle">
                    Generate and manage API keys for integrations and third-party applications
                </p>
            </div>
            
            <div class="page-actions">
                <button class="btn-secondary" onclick="viewDocumentation()">
                    📖 API Docs
                </button>
                <button class="btn-primary" onclick="generateNewKey()">
                    ➕ Generate New Key
                </button>
            </div>
        </div>

        <!-- API Keys List -->
        <div class="api-keys-container">
            <!-- Production API Key -->
            <div class="api-key-item">
                <div class="api-key-info">
                    <div class="api-key-header">
                        <h3 class="api-key-name">Production Integration</h3>
                        <span class="status-badge status-active">Active</span>
                    </div>
                    
                    <div class="api-key-details">
                        Primary API key for production authentication services. Used by main application backend.
                    </div>
                    
                    <div class="api-key-code">
                        <span>aik_prod_2024_3f7a8b9c2e1d6h4k9m...</span>
                        <button class="copy-button" onclick="copyToClipboard('aik_prod_2024_3f7a8b9c2e1d6h4k9m')">📋 Copy</button>
                    </div>
                    
                    <div class="permissions-list">
                        <div class="permission-item permission-granted">✅ User Authentication</div>
                        <div class="permission-item permission-granted">✅ Token Validation</div>
                        <div class="permission-item permission-granted">✅ User Profile Access</div>
                        <div class="permission-item permission-denied">❌ Admin Operations</div>
                    </div>
                    
                    <div class="api-key-meta">
                        <div class="meta-item">
                            <span class="meta-label">Created</span>
                            <span class="meta-value">March 1, 2024</span>
                        </div>
                        <div class="meta-item">
                            <span class="meta-label">Last Used</span>
                            <span class="meta-value">2 hours ago</span>
                        </div>
                        <div class="meta-item">
                            <span class="meta-label">Requests (30d)</span>
                            <span class="meta-value">12,847</span>
                        </div>
                        <div class="meta-item">
                            <span class="meta-label">Rate Limit</span>
                            <span class="meta-value">1000/hour</span>
                        </div>
                    </div>
                </div>
                
                <div class="api-key-actions">
                    <button class="btn-secondary" onclick="editApiKey('prod')">⚙️ Edit</button>
                    <button class="btn-secondary" onclick="viewUsage('prod')">📊 Usage</button>
                    <button class="btn-danger" onclick="revokeApiKey('prod')">🗑️ Revoke</button>
                </div>
            </div>

            <!-- Development API Key -->
            <div class="api-key-item">
                <div class="api-key-info">
                    <div class="api-key-header">
                        <h3 class="api-key-name">Development Testing</h3>
                        <span class="status-badge status-active">Active</span>
                    </div>
                    
                    <div class="api-key-details">
                        API key for development environment testing. Limited permissions and rate limits.
                    </div>
                    
                    <div class="api-key-code">
                        <span>aik_dev_2024_8x3m5n7p9q2w4e6r8t...</span>
                        <button class="copy-button" onclick="copyToClipboard('aik_dev_2024_8x3m5n7p9q2w4e6r8t')">📋 Copy</button>
                    </div>
                    
                    <div class="permissions-list">
                        <div class="permission-item permission-granted">✅ User Authentication</div>
                        <div class="permission-item permission-granted">✅ Token Validation</div>
                        <div class="permission-item permission-denied">❌ User Profile Access</div>
                        <div class="permission-item permission-denied">❌ Admin Operations</div>
                    </div>
                    
                    <div class="api-key-meta">
                        <div class="meta-item">
                            <span class="meta-label">Created</span>
                            <span class="meta-value">March 5, 2024</span>
                        </div>
                        <div class="meta-item">
                            <span class="meta-label">Last Used</span>
                            <span class="meta-value">1 day ago</span>
                        </div>
                        <div class="meta-item">
                            <span class="meta-label">Requests (30d)</span>
                            <span class="meta-value">342</span>
                        </div>
                        <div class="meta-item">
                            <span class="meta-label">Rate Limit</span>
                            <span class="meta-value">100/hour</span>
                        </div>
                    </div>
                </div>
                
                <div class="api-key-actions">
                    <button class="btn-secondary" onclick="editApiKey('dev')">⚙️ Edit</button>
                    <button class="btn-secondary" onclick="viewUsage('dev')">📊 Usage</button>
                    <button class="btn-danger" onclick="revokeApiKey('dev')">🗑️ Revoke</button>
                </div>
            </div>

            <!-- Mobile App API Key -->
            <div class="api-key-item">
                <div class="api-key-info">
                    <div class="api-key-header">
                        <h3 class="api-key-name">Mobile Application</h3>
                        <span class="status-badge status-active">Active</span>
                    </div>
                    
                    <div class="api-key-details">
                        Dedicated API key for mobile application with specialized permissions for mobile workflows.
                    </div>
                    
                    <div class="api-key-code">
                        <span>aik_mobile_2024_7b5d9f2h8k1m6n4p...</span>
                        <button class="copy-button" onclick="copyToClipboard('aik_mobile_2024_7b5d9f2h8k1m6n4p')">📋 Copy</button>
                    </div>
                    
                    <div class="permissions-list">
                        <div class="permission-item permission-granted">✅ User Authentication</div>
                        <div class="permission-item permission-granted">✅ Token Validation</div>
                        <div class="permission-item permission-granted">✅ User Profile Access</div>
                        <div class="permission-item permission-granted">✅ Push Notifications</div>
                    </div>
                    
                    <div class="api-key-meta">
                        <div class="meta-item">
                            <span class="meta-label">Created</span>
                            <span class="meta-value">February 28, 2024</span>
                        </div>
                        <div class="meta-item">
                            <span class="meta-label">Last Used</span>
                            <span class="meta-value">3 hours ago</span>
                        </div>
                        <div class="meta-item">
                            <span class="meta-label">Requests (30d)</span>
                            <span class="meta-value">8,234</span>
                        </div>
                        <div class="meta-item">
                            <span class="meta-label">Rate Limit</span>
                            <span class="meta-value">500/hour</span>
                        </div>
                    </div>
                </div>
                
                <div class="api-key-actions">
                    <button class="btn-secondary" onclick="editApiKey('mobile')">⚙️ Edit</button>
                    <button class="btn-secondary" onclick="viewUsage('mobile')">📊 Usage</button>
                    <button class="btn-danger" onclick="revokeApiKey('mobile')">🗑️ Revoke</button>
                </div>
            </div>

            <!-- Revoked API Key -->
            <div class="api-key-item" style="opacity: 0.6;">
                <div class="api-key-info">
                    <div class="api-key-header">
                        <h3 class="api-key-name">Legacy Integration</h3>
                        <span class="status-badge status-revoked">Revoked</span>
                    </div>
                    
                    <div class="api-key-details">
                        Previously used for legacy system integration. Revoked due to security policy update.
                    </div>
                    
                    <div class="api-key-code">
                        <span style="text-decoration: line-through;">aik_legacy_2023_9z8x7v6u5t4s3r2q...</span>
                        <span style="color: var(--color-text-muted); font-size: 12px;">Revoked</span>
                    </div>
                    
                    <div class="api-key-meta">
                        <div class="meta-item">
                            <span class="meta-label">Created</span>
                            <span class="meta-value">December 15, 2023</span>
                        </div>
                        <div class="meta-item">
                            <span class="meta-label">Revoked</span>
                            <span class="meta-value">March 10, 2024</span>
                        </div>
                        <div class="meta-item">
                            <span class="meta-label">Total Requests</span>
                            <span class="meta-value">45,782</span>
                        </div>
                        <div class="meta-item">
                            <span class="meta-label">Status</span>
                            <span class="meta-value">Permanently Disabled</span>
                        </div>
                    </div>
                </div>
                
                <div class="api-key-actions">
                    <button class="btn-secondary" onclick="viewUsage('legacy')" disabled style="opacity: 0.5;">📊 Usage</button>
                    <button class="btn-danger" onclick="deleteApiKey('legacy')">🗑️ Delete</button>
                </div>
            </div>
        </div>
    </main>

    <script src="auth-common.js"></script>
    <script>
        // Theme and authentication handled by auth-common.js
        
        // API Key Management Functions
        function generateNewKey() {
            alert('Generate API Key Modal would open with:\n- Key name/description\n- Permission scope selection\n- Rate limit configuration\n- Expiration settings\n- Environment selection (dev/staging/prod)');
        }
        
        function viewDocumentation() {
            alert('API Documentation would open showing:\n- Authentication endpoints\n- Available API methods\n- Code examples\n- Rate limiting info\n- Error handling\n- SDK downloads');
        }
        
        function copyToClipboard(keyId) {
            // Simulate copying to clipboard
            alert(`API key copied to clipboard!\n\nKey ID: ${keyId}...\n\nRemember to keep your API keys secure and never expose them in client-side code.`);
            
            // In real implementation:
            // navigator.clipboard.writeText(fullApiKey);
        }
        
        function editApiKey(keyType) {
            alert(`Edit ${keyType} API key settings:\n- Update description\n- Modify permissions\n- Change rate limits\n- Update expiration\n- Rotate key (generate new)`);
        }
        
        function viewUsage(keyType) {
            alert(`API Key Usage Analytics for ${keyType}:\n- Request volume over time\n- Success/error rates\n- Geographic distribution\n- Endpoint usage patterns\n- Rate limit hits\n- Performance metrics`);
        }
        
        function revokeApiKey(keyType) {
            if (confirm(`Are you sure you want to revoke the ${keyType} API key?\n\nThis action cannot be undone and will immediately disable all applications using this key.`)) {
                alert(`${keyType} API key has been revoked.\n\nAll requests using this key will now return 401 Unauthorized.\nApplications will need to be updated with a new API key.`);
            }
        }
        
        function deleteApiKey(keyType) {
            if (confirm(`Are you sure you want to permanently delete the ${keyType} API key?\n\nThis will remove all usage history and cannot be undone.`)) {
                alert(`${keyType} API key has been permanently deleted.\n\nAll associated usage data and logs have been archived.`);
            }
        }
        
        // Simulate real-time updates
        function updateLastUsed() {
            const metaValues = document.querySelectorAll('.meta-value');
            metaValues.forEach(value => {
                if (value.textContent.includes('ago')) {
                    // Simulate updating "last used" timestamps
                    console.log('Updating last used timestamps...');
                }
            });
        }
        
        // Update every 30 seconds
        setInterval(updateLastUsed, 30000);
    </script>
</body>
</html>