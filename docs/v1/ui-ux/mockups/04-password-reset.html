<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reset Your Password - AuthentiIDP</title>
    <link rel="stylesheet" href="styles.css">
    <script src="theme-manager.js"></script>
</head>
<body>
    <div class="auth-container">
        <div class="auth-card">
            <!-- Header -->
            <div class="text-center" style="margin-bottom: 32px;">
                <h1 style="color: var(--color-primary); margin-bottom: 8px;">AuthentiIDP</h1>
                <p class="text-muted">Reset Your Password</p>
            </div>

            <!-- Success Alert (hidden by default) -->
            <div class="alert alert-success" style="display: none;" id="success-alert">
                <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                <div>
                    <strong>Reset link sent!</strong> Check your email for password reset instructions.
                </div>
            </div>

            <!-- Error Alert (hidden by default) -->
            <div class="alert alert-error" style="display: none;" id="error-alert">
                <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z" />
                </svg>
                <div>
                    <strong>Email not found.</strong> Please check your email address and try again.
                </div>
            </div>

            <!-- Main Content -->
            <div style="margin-bottom: 32px;">
                <div style="width: 64px; height: 64px; background: var(--color-secondary); border-radius: var(--radius-full); margin: 0 auto 24px; display: flex; align-items: center; justify-content: center; font-size: 24px;">
                    ⚿
                </div>
                <h2 style="font-size: var(--font-size-xl); margin-bottom: 16px; text-align: center;">Password Recovery</h2>
                <p style="color: var(--color-text-muted); text-align: center; margin-bottom: 24px;">
                    Enter your email address and we'll send you a link to reset your password.
                </p>
            </div>

            <!-- Reset Form -->
            <form id="reset-form">
                <div class="form-group">
                    <label for="reset-email" class="form-label">Email Address</label>
                    <input 
                        type="email" 
                        id="reset-email" 
                        name="email" 
                        class="form-input" 
                        placeholder="Enter your email"
                        required
                        autocomplete="email"
                    >
                </div>

                <button type="submit" class="btn btn-primary btn-full" id="reset-btn">
                    <span id="reset-text">Send Reset Link</span>
                    <svg id="reset-spinner" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" style="display: none; animation: spin 1s linear infinite;">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" />
                    </svg>
                </button>
            </form>

            <!-- Additional Help -->
            <div style="background: var(--color-secondary); padding: 20px; border-radius: var(--radius-md); margin-top: 24px;">
                <h3 style="font-size: var(--font-size-base); margin-bottom: 12px; color: var(--color-text);">
                    Need additional help?
                </h3>
                <ul style="color: var(--color-text-muted); font-size: var(--font-size-sm); margin-bottom: 0; padding-left: 20px;">
                    <li style="margin-bottom: 8px;">Make sure you enter the email used to create your account</li>
                    <li style="margin-bottom: 8px;">Check your spam folder if you don't see the email</li>
                    <li style="margin-bottom: 8px;">Contact support if you still can't reset your password</li>
                </ul>
            </div>

            <!-- Back Link -->
            <div class="text-center" style="margin-top: 32px;">
                <a href="01-login.html" style="color: var(--color-text-muted); text-decoration: none; font-size: var(--font-size-sm);">
                    ← Back to Sign In
                </a>
            </div>
        </div>

        <!-- Theme Toggle -->
        <button class="theme-toggle" id="theme-toggle" style="position: fixed; top: 24px; right: 24px;" aria-label="Toggle theme">
            ☽
        </button>
    </div>

    <script>
        // Theme management is now handled by the shared theme-manager.js

        // Form Handling
        document.getElementById('reset-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const btn = document.getElementById('reset-btn');
            const text = document.getElementById('reset-text');
            const spinner = document.getElementById('reset-spinner');
            const errorAlert = document.getElementById('error-alert');
            const successAlert = document.getElementById('success-alert');
            
            // Hide alerts
            errorAlert.style.display = 'none';
            successAlert.style.display = 'none';
            
            // Show loading state
            btn.disabled = true;
            text.textContent = 'Sending...';
            spinner.style.display = 'block';
            
            // Simulate API call
            setTimeout(() => {
                const email = document.getElementById('reset-email').value;
                
                // Simple validation for demo
                if (email && email.includes('@')) {
                    // Success - show success message
                    successAlert.style.display = 'flex';
                    
                    // Reset form
                    document.getElementById('reset-form').reset();
                    
                    // Reset button after delay
                    setTimeout(() => {
                        btn.disabled = false;
                        text.textContent = 'Send Reset Link';
                        spinner.style.display = 'none';
                    }, 3000);
                } else {
                    // Error - show error message
                    errorAlert.style.display = 'flex';
                    
                    // Reset button
                    btn.disabled = false;
                    text.textContent = 'Send Reset Link';
                    spinner.style.display = 'none';
                }
            }, 2000);
        });

        // Theme manager is automatically initialized by theme-manager.js
    </script>
</body>
</html>